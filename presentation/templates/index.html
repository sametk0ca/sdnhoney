{% extends "base.html" %}

{% block title %}SHONET - Home{% endblock %}

{% block extra_head %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
{% endblock %}

{% block extra_css %}
<style>
    .hero-section {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 120px 0;
        text-align: center;
        min-height: 100vh;
        display: flex;
        align-items: center;
        position: relative;
    }
    
    .hero-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 20"><defs><radialGradient id="a" cx="50%" cy="50%"><stop offset="0%" stop-color="rgba(255,255,255,.1)"/><stop offset="100%" stop-color="rgba(255,255,255,0)"/></radialGradient></defs><circle fill="url(%23a)" cx="10" cy="10" r="10"/><circle fill="url(%23a)" cx="30" cy="5" r="8"/><circle fill="url(%23a)" cx="60" cy="15" r="6"/><circle fill="url(%23a)" cx="80" cy="8" r="7"/></svg>') repeat;
        opacity: 0.1;
    }
    
    .hero-content {
        position: relative;
        z-index: 1;
    }
    
    .cta-button {
        background: linear-gradient(45deg, #ff6b6b, #ee5a52);
        color: white !important;
        padding: 15px 30px;
        border-radius: 50px;
        text-decoration: none;
        font-weight: bold;
        transition: all 0.3s;
        display: inline-block;
        margin: 10px;
        box-shadow: 0 4px 15px rgba(238, 90, 82, 0.4);
    }
    
    .cta-button:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 20px rgba(238, 90, 82, 0.6);
        color: white !important;
    }
    
    .cta-secondary {
        background: linear-gradient(45deg, #4ecdc4, #44a08d);
        box-shadow: 0 4px 15px rgba(78, 205, 196, 0.4);
    }
    
    .cta-secondary:hover {
        box-shadow: 0 6px 20px rgba(78, 205, 196, 0.6);
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="hero-content fade-in">
            <h1 class="display-3 fw-bold mb-4">
                SHONET
            </h1>
            <h2 class="h4 mb-4 text-light">
                Software-defined Honeypot-Oriented Network Engagement and Tracking
            </h2>
            <p class="lead mb-5" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.8);">
                A cutting-edge research project demonstrating intelligent network security through 
                <strong>Software Defined Networking</strong>, <strong>Machine Learning</strong>, 
                and <strong>Multi-layered Honeypot Deception</strong>
            </p>
            <div class="d-flex justify-content-center gap-3 flex-wrap">
                <a href="{{ url_for('documentation') }}" class="cta-button">
                    <i class="fas fa-book"></i> Documentation
                </a>
            </div>
        </div>
    </div>
</section>

<!-- System Status Banner -->
<section class="py-4" style="background: rgba(0,0,0,0.3);">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-6">
                <h5 class="mb-0">
                    <span class="status-indicator" id="system-status-indicator"></span>
                    System Status: <span id="system-status-text">Checking...</span>
                </h5>
            </div>
            <div class="col-md-6 text-md-end">
                <small>
                    <i class="fas fa-server"></i> Controller: <span id="controller-status">-</span> |
                    <i class="fas fa-chart-line"></i> Dashboard: <span id="dashboard-status">-</span> |
                    <i class="fas fa-brain"></i> ML Model: <span id="ml-status">-</span>
                </small>
            </div>
        </div>
    </div>
</section>

<!-- Key Features -->
<section class="py-5">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-12">
                <h2 class="display-5 fw-bold mb-3">Key Features</h2>
                <p class="lead">Advanced network security through intelligent traffic analysis and deception</p>
            </div>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-3 col-md-6">
                <div class="card h-100 text-center">
                    <div class="card-body">
                        <div class="feature-icon">
                            <i class="fas fa-network-wired"></i>
                        </div>
                        <h5 class="card-title">SDN Controller</h5>
                        <p class="card-text">
                            Ryu-based OpenFlow controller with intelligent traffic classification 
                            and dynamic flow installation for seamless redirection.
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="card h-100 text-center">
                    <div class="card-body">
                        <div class="feature-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <h5 class="card-title">ML Classification</h5>
                        <p class="card-text">
                            Real-time behavioral analysis with binary classification 
                            (1=malicious, 0=benign) based on request patterns and features.
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="card h-100 text-center">
                    <div class="card-body">
                        <div class="feature-icon">
                            <i class="fas fa-spider"></i>
                        </div>
                        <h5 class="card-title">Multi-layer Honeypots</h5>
                        <p class="card-text">
                            Triage honeypot for initial classification and deep honeypot 
                            for advanced deception and prolonged attacker engagement.
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-3 col-md-6">
                <div class="card h-100 text-center">
                    <div class="card-body">
                        <div class="feature-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h5 class="card-title">Advanced Security</h5>
                        <p class="card-text">
                            Comprehensive threat detection with automated response mechanisms 
                            and detailed attack pattern analysis for enhanced protection.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Traffic Flow Diagram -->
<section class="py-5" style="background: rgba(0,0,0,0.2);">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="display-5 fw-bold mb-3">Traffic Flow & Classification</h2>
                <p class="lead">How requests are analyzed and redirected based on threat level</p>
            </div>
        </div>
        
        <div class="architecture-diagram">
            <div class="row align-items-center">
                <div class="col-md-2">
                    <div class="component-box">
                        <i class="fas fa-laptop fa-2x mb-2"></i>
                        <h6>External Client</h6>
                        <small>h6 (10.0.0.6)</small>
                    </div>
                </div>
                
                <div class="col-md-1 text-center">
                    <i class="fas fa-arrow-right fa-2x text-primary"></i>
                </div>
                
                <div class="col-md-2">
                    <div class="component-box">
                        <i class="fas fa-microchip fa-2x mb-2"></i>
                        <h6>SDN Controller</h6>
                        <small>Traffic Analysis</small>
                    </div>
                </div>
                
                <div class="col-md-1 text-center">
                    <i class="fas fa-code-branch fa-2x text-warning"></i>
                </div>
                
                <div class="col-md-6">
                    <div class="row g-2">
                        <div class="col-4">
                            <div class="component-box" style="border-color: #27ae60;">
                                <i class="fas fa-server fa-lg mb-1"></i>
                                <h6 style="font-size: 0.9rem;">Normal Servers</h6>
                                <small>h1, h2, h3</small>
                                <div class="badge bg-success mt-1">Normal Traffic</div>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="component-box" style="border-color: #f39c12;">
                                <i class="fas fa-filter fa-lg mb-1"></i>
                                <h6 style="font-size: 0.9rem;">Triage Honeypot</h6>
                                <small>h4 (ML Analysis)</small>
                                <div class="badge bg-warning mt-1">Suspicious</div>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="component-box" style="border-color: #e74c3c;">
                                <i class="fas fa-bug fa-lg mb-1"></i>
                                <h6 style="font-size: 0.9rem;">Deep Honeypot</h6>
                                <small>h5 (Deception)</small>
                                <div class="badge bg-danger mt-1">Malicious</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Technology Stack -->
<section class="py-5" style="background: rgba(0,0,0,0.2);">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-12">
                <h2 class="display-5 fw-bold mb-3">Technology Stack</h2>
                <p class="lead">Built with industry-standard tools and frameworks</p>
            </div>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-2 col-md-4 col-6 text-center">
                <div class="card h-100">
                    <div class="card-body">
                        <i class="fas fa-network-wired fa-3x text-primary mb-3"></i>
                        <h6>Ryu SDN</h6>
                        <small>OpenFlow Controller</small>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-2 col-md-4 col-6 text-center">
                <div class="card h-100">
                    <div class="card-body">
                        <i class="fas fa-server fa-3x text-success mb-3"></i>
                        <h6>Mininet</h6>
                        <small>Network Emulation</small>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-2 col-md-4 col-6 text-center">
                <div class="card h-100">
                    <div class="card-body">
                        <i class="fab fa-python fa-3x text-warning mb-3"></i>
                        <h6>Python</h6>
                        <small>Core Development</small>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-2 col-md-4 col-6 text-center">
                <div class="card h-100">
                    <div class="card-body">
                        <i class="fas fa-brain fa-3x text-info mb-3"></i>
                        <h6>Scikit-learn</h6>
                        <small>Machine Learning</small>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-2 col-md-4 col-6 text-center">
                <div class="card h-100">
                    <div class="card-body">
                        <i class="fas fa-globe fa-3x text-primary mb-3"></i>
                        <h6>Flask</h6>
                        <small>Web Framework</small>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-2 col-md-4 col-6 text-center">
                <div class="card h-100">
                    <div class="card-body">
                        <i class="fas fa-chart-bar fa-3x text-danger mb-3"></i>
                        <h6>Bootstrap</h6>
                        <small>UI Framework</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- System Components -->
<section class="py-5" id="components">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-12">
                <h2 class="display-5 fw-bold mb-3">
                    <i class="fas fa-cubes text-primary"></i>
                    System Components
                </h2>
                <p class="lead">Core components that make up the SHONET</p>
            </div>
        </div>
        
        <div class="row g-4">
            <!-- SDN Controller -->
            <div class="col-lg-6">
                <div class="card h-100">
                    <div class="card-header">
                        <h4 class="mb-0">
                            <i class="fas fa-microchip text-primary"></i>
                            SDN Controller
                        </h4>
                    </div>
                </div>
            </div>
            
            <!-- Normal Servers -->
            <div class="col-lg-6">
                <div class="card h-100">
                    <div class="card-header">
                        <h4 class="mb-0">
                            <i class="fas fa-server text-info"></i>
                            Normal Servers (h1, h2, h3)
                        </h4>
                    </div>
                </div>
            </div>
            
            <!-- Triage Honeypot -->
            <div class="col-lg-6">
                <div class="card h-100">
                    <div class="card-header">
                        <h4 class="mb-0">
                            <i class="fas fa-filter text-warning"></i>
                            Triage Honeypot (h4)
                        </h4>
                    </div>
                </div>
            </div>
            
            <!-- Deep Honeypot -->
            <div class="col-lg-6">
                <div class="card h-100">
                    <div class="card-header">
                        <h4 class="mb-0">
                            <i class="fas fa-bug text-danger"></i>
                            Deep Honeypot (h5)
                        </h4>
                    </div>
                </div>
            </div>
            
            <!-- ML Model -->
            <div class="col-lg-6">
                <div class="card h-100">
                    <div class="card-header">
                        <h4 class="mb-0">
                            <i class="fas fa-brain text-info"></i>
                            Machine Learning Model
                        </h4>
                    </div>
                </div>
            </div>
            
            <!-- Network Topology -->
            <div class="col-lg-6">
                <div class="card h-100">
                    <div class="card-header">
                        <h4 class="mb-0">
                            <i class="fas fa-network-wired text-primary"></i>
                            Network Topology (Mininet)
                        </h4>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- System Architecture -->
<section class="py-5" style="background: rgba(0,0,0,0.2);" id="architecture">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-12">
                <h2 class="display-5 fw-bold mb-3">
                    <i class="fas fa-sitemap text-primary"></i>
                    System Architecture
                </h2>
                <p class="lead">Complete system design and traffic flow overview</p>
            </div>
        </div>
        
        <!-- Network Topology Diagram -->
        <div class="row mb-5">
            <div class="col-12 text-center">
                <div class="topology-diagram-container p-4" style="background: #2a3642; border-radius: 10px;">
                    <img src="{{ url_for('static', filename='images/networktopology.jpg') }}" 
                         alt="SDN Honeypot Network Topology" 
                         class="img-fluid" 
                         style="max-width: 100%; height: auto; border-radius: 8px;">
                    <p class="mt-3" style="color: white;">Network topology showing the complete SDN architecture</p>
                </div>
            </div>
        </div>
        
        <!-- Traffic Flow Process -->
        <div class="row g-4">
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-header text-center">
                        <span class="badge bg-primary fs-5 me-2">1</span>
                        <h5 class="d-inline">Initial Request</h5>
                    </div>
                    <div class="card-body">
                        <div class="text-center mb-3">
                            <i class="fas fa-paper-plane fa-3x text-primary"></i>
                        </div>
                        <ul>
                            <li>External client sends HTTP request</li>
                            <li>Request intercepted by SDN controller</li>
                            <li>Source IP analysis begins</li>
                            <li>Request patterns examined</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-header text-center">
                        <span class="badge bg-success fs-5 me-2">2</span>
                        <h5 class="d-inline">Classification</h5>
                    </div>
                    <div class="card-body">
                        <div class="text-center mb-3">
                            <i class="fas fa-code-branch fa-3x text-success"></i>
                        </div>
                        <ul>
                            <li><strong>Normal:</strong> Route to legitimate servers</li>
                            <li><strong>Suspicious:</strong> Redirect to triage honeypot</li>
                            <li><strong>Malicious:</strong> Send to deep honeypot</li>
                            <li>Dynamic flow rules installed</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-header text-center">
                        <span class="badge bg-warning fs-5 me-2">3</span>
                        <h5 class="d-inline">ML Analysis</h5>
                    </div>
                    <div class="card-body">
                        <div class="text-center mb-3">
                            <i class="fas fa-brain fa-3x text-warning"></i>
                        </div>
                        <ul>
                            <li>Triage honeypot captures data</li>
                            <li>ML model analyzes behavior</li>
                            <li>Risk score calculated (0-1)</li>
                            <li>Binary decision sent to controller</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Function to update system status
    function updateSystemStatus() {
        fetch('/api/system-status')
            .then(response => response.json())
            .then(data => {
                // Update status indicators with safe property access
                const indicator = document.getElementById('system-status-indicator');
                const statusText = document.getElementById('system-status-text');
                const controllerStatus = document.getElementById('controller-status');
                const dashboardStatus = document.getElementById('dashboard-status');
                const mlStatus = document.getElementById('ml-status');
                
                // Safe access to controller status
                const controllerActive = data?.controller?.status === 'ACTIVE';
                
                if (controllerActive) {
                    indicator.className = 'status-indicator status-active';
                    statusText.textContent = 'System Online';
                    controllerStatus.innerHTML = '<span class="text-success">Active</span>';
                } else {
                    indicator.className = 'status-indicator status-inactive';
                    statusText.textContent = 'System Offline';
                    controllerStatus.innerHTML = '<span class="text-danger">Inactive</span>';
                }
                
                // Safe access to dashboard status
                const dashboardActive = data?.dashboard?.status === 'ACTIVE';
                dashboardStatus.innerHTML = dashboardActive ? 
                    '<span class="text-success">Active</span>' : 
                    '<span class="text-danger">Inactive</span>';
                
                // Safe access to ML model status
                const mlOperational = data?.ml_model?.status === 'OPERATIONAL';
                mlStatus.innerHTML = mlOperational ? 
                    '<span class="text-success">Operational</span>' : 
                    '<span class="text-danger">Inactive</span>';
            })
            .catch(error => {
                console.error('Error fetching system status:', error);
                // Safely update elements that definitely exist
                const indicator = document.getElementById('system-status-indicator');
                const statusText = document.getElementById('system-status-text');
                if (indicator) indicator.className = 'status-indicator status-inactive';
                if (statusText) statusText.textContent = 'Status Unknown';
            });
    }
    
    // Initial status update
    updateSystemStatus();
    
    // Update every 10 seconds
    setInterval(updateSystemStatus, 10000);
});
</script>
{% endblock %} 